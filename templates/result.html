{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h1>Transferring Playlist...</h1>
    <p>Please wait while your playlist is being transferred to Spotify. This may take a few minutes depending on the size of the playlist.</p>
    
    <!-- Progress bar -->
    <div class="progress" style="height: 25px; margin-top: 20px;">
        <div id="progress-bar" class="progress-bar progress-bar-striped progress-bar-animated bg-success" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
    </div>

    <!-- Loading message -->
    <div id="loading-message" style="text-align: center; margin-top: 20px;">
        <p>Loading, please do not close this page...</p>
    </div>
</div>

<script>
    function simulateProgress() {
        let progressBar = document.getElementById('progress-bar');
        let value = 0;

        let interval = setInterval(function() {
            if (value < 100) {
                value += 1; 
                progressBar.style.width = value + '%';
                progressBar.setAttribute('aria-valuenow', value);
                progressBar.innerText = value + '%';
            } else {
                clearInterval(interval);
                window.location.href = '/success';
            }
        }, 100);
    }

    // Start the progress bar simulation
    simulateProgress();
</script>
{% endblock %}
